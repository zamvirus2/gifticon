# Gifticon (기프티콘 구매)


## 1. 서비스 시나리오


### 기능적 요구사항

```
1. 기프티콘 MD가 구매가능한 기프티콘정보, 구매가능 수량, 가격을 등록한다.
2. 고객이 기프티콘을 장바구니에 담는다.
3. 기프티콘이 장바구니에 담기면. 담은 수량만큼 기프티콘 구매가능 수량에서 차감된다. 
4. 장바구니에 담기면 결제정보를 승인한다.
5. 고객이 장바구니를 취소할 수 있다. 
6. 장바구니를 취소하면 결제가 취소된다.
7. 고객이 모든 진행내역을 볼 수 있어야 한다.
```

### 비기능적 요구사항
```
1. 트랜잭션
    1.1 구매 가능한 기프티콘 수량이 부족하면 장바구니 담기가 되지 않는다. --> Sync 호출
    1.2 장바구니가 취소되면 결제가 취소되고 구매가능한 수량이 증가한다. --> SAGA
2. 장애격리
    2.1 결제가 완료되지 않아도 장바구니 쇼핑은 항상 가능해야 한다. --> Async (event-driven), Eventual Consistency
    2.2 장바구니 쇼핑에 사용자가 몰려서 기프티콘 관리시스템의 부하가 과중하면, 장바구니 쇼핑을 잠시후에 할 수 있도록 유도한다. --> Circuit breaker, fallback
3. 성능
    3.1 고객이 상시 쇼핑, 결제 내역을 조회 할 수 있도록 성능을 고려하여 별도의 view(MyPage)로 구성한다. --> CQRS
```

